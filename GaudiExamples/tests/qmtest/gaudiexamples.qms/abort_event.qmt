<?xml version="1.0" ?><!DOCTYPE extension  PUBLIC '-//QM/2.3/Extension//EN'  'http://www.codesourcery.com/qm/dtds/2.3/-//qm/2.3/extension//en.dtd'>
<extension class="GaudiTest.GaudiExeTest" kind="test">
  <argument name="program"><text>gaudirun.py</text></argument>
  <argument name="options"><text>
from Gaudi.Configuration import *

from Configurables import HelloWorld, AbortEventAlg

importOptions("Common.opts")

h1 = HelloWorld("HelloWorld1")
h2 = HelloWorld("HelloWorld2")

alg = AbortEventAlg(AbortedEventNumber = 3)

app = ApplicationMgr(TopAlg = [h1,alg,h2],
                     EvtSel = "NONE", EvtMax = 5)

MessageSvc().setDebug.append("EventLoopMgr")

</text></argument>
<argument name="validator"><text>
stdout = '\n'.join(l for l in stdout.splitlines()
                   if 'EventLoopMgr      SUCCESS Event Number =' not in l and
                      ' ---> Loop Finished' not in l)
findReferenceBlock("""
HelloWorld1          INFO executing....
HelloWorld2          INFO executing....
HelloWorld1          INFO executing....
HelloWorld2          INFO executing....
HelloWorld1          INFO executing....
EventLoopMgr        DEBUG AbortEvent incident fired by AbortEventAlg
HelloWorld1          INFO executing....
HelloWorld2          INFO executing....
HelloWorld1          INFO executing....
HelloWorld2          INFO executing....
""", stdout=stdout, signature_offset = 5)
</text></argument>
</extension>
